{"version":3,"sources":["js/store/router/reducers.js","js/store/vk/reducers.js","js/store/formData/reducers.js","js/store/counter/reducers.js","js/store/reducers.js","js/store/vk/actionTypes.js","js/store/router/actionTypes.js","js/services/VK.js","js/services/_functions.js","js/store/formData/actionTypes.js","js/store/counter/actionTypes.js","js/store/router/actions.js","registerServiceWorker.js","js/store/counter/actions.js","js/components/atoms/OutlineMessage/index.js","js/panels/counters/main.js","js/panels/main/activeCounter.js","js/panels/settings/main/index.js","js/components/modals/ManageCounter/index.js","App.js","js/store/vk/actions.js","index.js"],"names":["initialState","activeStory","activeView","activePanel","storiesHistory","viewsHistory","panelsHistory","activeModals","modalHistory","popouts","scrollPosition","accessToken","undefined","colorScheme","forms","activeCounter","counters","lastId","loadedCounters","combineReducers","vkui","state","arguments","length","action","type","Object","objectSpread","payload","router","View","view","Panel","panel","window","history","pushState","viewIndexInHistory","indexOf","splice","concat","toConsumableArray","VKConnect","send","defineProperty","pageYOffset","story","initial_panel","firstPanel","shift","firstView","scrollTo","smoothScrollToTop","c","document","documentElement","scrollTop","body","requestAnimationFrame","storiesIndexInHistory","setView","setPanel","setStory","popoutsData","viewModalsHistory","activeModal","push","pop","panelsHistoryNew","from","status","popout","id","modalProps","modalsHistory","activeModalProps","formData","form","data","counter","_ret","name","isUniq","forEach","counterObj","console","log","matched","match","numberName","Number","replace","localStorage","setItem","JSON","stringify","v","value","val","goBack","openPopout","closePopout","openModal","closeModal","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","createCounter","resetValue","setCounters","setActiveCounter","setLastId","changeValueCounter","setLoadedCounters","OutlineMessage","react_default","a","createElement","className","this","props","text","React","Component","CountersPanelMain","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","deleteAllCounts","countersLength","clear","alertMessage","setState","draggable","removable","countTries","i","_this2","es6","actions","title","autoclose","style","IS_PLATFORM_IOS","deleteCounter","onClose","_this3","message","actionText","_this4","_this5","_this$props","theme","left","add_outline_default","onClick","atoms_OutlineMessage_OutlineMessage","vertical","display","flex","confirmDeleteCounters","level","before","delete_default","done_default","reorder_default","map","item","key","description","String","after","onRemove","confirmDeleteCounter","onDragFinish","_ref","to","draggingList","currentActive","connect","dispatch","bindActionCreators","noSleep","NoSleep","MainPanelActiveCounter","incrementCounter","enable","counterValue","activeCounterVal","activeCounterObj","iWillUpdateMyself","decrements","updateCounterValue","incPositive","e","incNegative","openEditModal","onCloseEditModal","incStart","originalEvent","preventDefault","incTimeout","setTimeout","incInterval","setInterval","decStart","decTimeout","decInterval","onStopTouch","clearTimeout","clearInterval","copyCounterValue","keys","prevProps","store","getState","counterVal","counterValueLength","bigValueClasses","classNames","big-value-small","middle-size","middle-small-size","small-size","write_default","lib","copy_default","onTouchEnd","onMove","touchMove","onStart","onEnd","useCapture","stopPropogation","size","stretched","PureComponent","SettingsPanelMain","share_external_default","link","indicator","version","ManageCounterModal","handleInput","currentTarget","checked","filterInputValue","inputData","saveCounter","firstName","find","counter_","titleInputStatus","editing","target","header","cancel_default","right","settlingHeight","bottom","autoComplete","onChange","top","defaultValue","placeholder","maxLength","pattern","onInput","inputNumberOnly","App","copyActiveCounterValue","lastAndroidBackAction","lastUpdate","VKConnectOld","subscribe","VKConnectOldCallback","detail","unsubscribe","scheme","onpopstate","timeNow","Date","prevState","snapshot","_this$props2","lastIdCounter","pageScrollPosition","scroll","_updateAll","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","apply","updateAll","_this$props3","parse","getItem","_this$props4","homeModals","modals_ManageCounter","isWebView","tabbar","selected","play_speed_default","list_default","modal","onSwipeBack","main_activeCounter","counters_main","settings_main","__webpack_require__","d","__webpack_exports__","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","onerror","errorMsg","url","lineNumber","columnNumber","textAoutput","stack","userAgent","innerHTML","info","root","getElementById","mVKMiniAppsScrollHelper","ReactDOM","render","react_redux_es","src_App","URL","process","origin","addEventListener","fetch","response","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.12f74d7b.chunk.js","sourcesContent":["import {\r\n    SET_PAGE,\r\n    GO_BACK,\r\n    OPEN_POPOUT,\r\n    CLOSE_POPOUT,\r\n    OPEN_MODAL,\r\n    CLOSE_MODAL,\r\n    SET_STORY\r\n} from './actionTypes';\r\n\r\nimport * as VK from \"../../services/VK\";\r\nimport {smoothScrollToTop} from \"../../services/_functions\";\r\n\r\nconst initialState = {\r\n    activeStory: null,\r\n    activeView: null,\r\n    activePanel: null,\r\n\r\n    storiesHistory: [],\r\n    viewsHistory: [],\r\n    panelsHistory: [],\r\n\r\n    activeModals: [],\r\n    modalHistory: [],\r\n    popouts: [],\r\n\r\n    scrollPosition: []\r\n};\r\n\r\nexport const routerReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case SET_PAGE: {\r\n            let View = action.payload.view;\r\n            let Panel = action.payload.panel;\r\n\r\n            window.history.pushState(null, null);\r\n\r\n            let panelsHistory = state.panelsHistory[View] || [];\r\n            let viewsHistory = state.viewsHistory[state.activeStory] || [];\r\n\r\n            const viewIndexInHistory = viewsHistory.indexOf(View);\r\n\r\n            if (viewIndexInHistory !== -1) {\r\n                viewsHistory.splice(viewIndexInHistory, 1);\r\n            }\r\n\r\n            if (panelsHistory.indexOf(Panel) === -1) {\r\n                panelsHistory = [...panelsHistory, Panel];\r\n            }\r\n\r\n            if (panelsHistory.length > 1) {\r\n                VK.swipeBackOn();\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                activeView: View,\r\n                activePanel: Panel,\r\n\r\n                panelsHistory: {\r\n                    ...state.panelsHistory,\r\n                    [View]: panelsHistory,\r\n                },\r\n                viewsHistory: {\r\n                    ...state.viewsHistory,\r\n                    [state.activeStory]: [...viewsHistory, View]\r\n                },\r\n                scrollPosition: {\r\n                    ...state.scrollPosition,\r\n                    [state.activeStory + \"_\" + state.activeView + \"_\" + state.activePanel]: window.pageYOffset\r\n                }\r\n            };\r\n        }\r\n\r\n        case SET_STORY: {\r\n            window.history.pushState(null, null);\r\n\r\n            let viewsHistory = state.viewsHistory[action.payload.story] || [action.payload.story];\r\n\r\n            let storiesHistory = state.storiesHistory;\r\n            let activeView = viewsHistory[viewsHistory.length - 1];\r\n            let panelsHistory = state.panelsHistory[activeView] || [action.payload.initial_panel];\r\n            let activePanel = panelsHistory[panelsHistory.length - 1];\r\n\r\n            if (action.payload.story === state.activeStory) {\r\n                if (panelsHistory.length > 1) {\r\n                    let firstPanel = panelsHistory.shift();\r\n                    panelsHistory = [firstPanel];\r\n\r\n                    activePanel = panelsHistory[panelsHistory.length - 1];\r\n                } else if (viewsHistory.length > 1) {\r\n                    let firstView = viewsHistory.shift();\r\n                    viewsHistory = [firstView];\r\n\r\n                    activeView = viewsHistory[viewsHistory.length - 1];\r\n                    panelsHistory = state.panelsHistory[activeView];\r\n                    activePanel = panelsHistory[panelsHistory.length - 1];\r\n                }\r\n            }\r\n\r\n            if (action.payload.story === state.activeStory && panelsHistory.length === 1 && window.pageYOffset > 0) {\r\n                window.scrollTo(0, 30);\r\n\r\n                smoothScrollToTop();\r\n            }\r\n\r\n            const storiesIndexInHistory = storiesHistory.indexOf(action.payload.story);\r\n\r\n            if (storiesIndexInHistory !== -1 && storiesIndexInHistory !== 0) {\r\n                storiesHistory.splice(storiesIndexInHistory, 1);\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                activeStory: action.payload.story,\r\n                activeView: activeView,\r\n                activePanel: activePanel,\r\n\r\n                storiesHistory: [...storiesHistory, action.payload.story],\r\n                viewsHistory: {\r\n                    ...state.viewsHistory,\r\n                    [activeView]: viewsHistory\r\n                },\r\n                panelsHistory: {\r\n                    ...state.panelsHistory,\r\n                    [activeView]: panelsHistory\r\n                },\r\n\r\n                scrollPosition: {\r\n                    ...state.scrollPosition,\r\n                    [state.activeStory + \"_\" + state.activeView + \"_\" + state.activePanel]: window.pageYOffset\r\n                }\r\n            };\r\n        }\r\n\r\n        case GO_BACK: {\r\n            let setView = state.activeView;\r\n            let setPanel = state.activePanel;\r\n            let setStory = state.activeStory;\r\n\r\n            let popoutsData = state.popouts;\r\n\r\n            if (popoutsData[setView]) {\r\n                popoutsData[setView] = null;\r\n\r\n                return {\r\n                    ...state,\r\n                    popouts: {\r\n                        ...state.popouts, popoutsData\r\n                    }\r\n                };\r\n            }\r\n\r\n            let viewModalsHistory = state.modalHistory[setView];\r\n\r\n            if (viewModalsHistory !== undefined && viewModalsHistory.length !== 0) {\r\n                let activeModal = viewModalsHistory[viewModalsHistory.length - 2] || null;\r\n\r\n                if (activeModal === null) {\r\n                    viewModalsHistory = [];\r\n                } else if (viewModalsHistory.indexOf(activeModal) !== -1) {\r\n                    viewModalsHistory = viewModalsHistory.splice(0, viewModalsHistory.indexOf(activeModal) + 1);\r\n                } else {\r\n                    viewModalsHistory.push(activeModal);\r\n                }\r\n\r\n                return {\r\n                    ...state,\r\n                    activeModals: {\r\n                        ...state.activeModals,\r\n                        [setView]: activeModal\r\n                    },\r\n                    modalHistory: {\r\n                        ...state.modalHistory,\r\n                        [setView]: viewModalsHistory\r\n                    }\r\n                };\r\n            }\r\n\r\n            let panelsHistory = state.panelsHistory[setView] || [];\r\n            let viewsHistory = state.viewsHistory[state.activeStory] || [];\r\n            let storiesHistory = state.storiesHistory;\r\n\r\n            if (panelsHistory.length > 1) {\r\n                panelsHistory.pop();\r\n\r\n                setPanel = panelsHistory[panelsHistory.length - 1];\r\n            } else if (viewsHistory.length > 1) {\r\n                viewsHistory.pop();\r\n\r\n                setView = viewsHistory[viewsHistory.length - 1];\r\n                let panelsHistoryNew = state.panelsHistory[setView];\r\n\r\n                setPanel = panelsHistoryNew[panelsHistoryNew.length - 1];\r\n            } else if (storiesHistory.length > 1 && action.payload.from === 'Android') {\r\n                storiesHistory.pop();\r\n\r\n                setStory = storiesHistory[storiesHistory.length - 1];\r\n                setView = state.viewsHistory[setStory][state.viewsHistory[setStory].length - 1];\r\n\r\n                let panelsHistoryNew = state.panelsHistory[setView];\r\n\r\n                if (panelsHistoryNew.length > 1) {\r\n                    setPanel = panelsHistoryNew[panelsHistoryNew.length - 1];\r\n                } else {\r\n                    setPanel = panelsHistoryNew[0];\r\n                }\r\n            } else {\r\n                VK.closeApp();\r\n            }\r\n\r\n            if (panelsHistory.length === 1 && action.payload.from === 'iOS') {\r\n                VK.swipeBackOff();\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                activeView: setView,\r\n                activePanel: setPanel,\r\n                activeStory: setStory,\r\n\r\n                viewsHistory: {\r\n                    ...state.viewsHistory,\r\n                    [state.activeView]: viewsHistory\r\n                },\r\n                panelsHistory: {\r\n                    ...state.panelsHistory,\r\n                    [state.activeView]: panelsHistory\r\n                }\r\n            };\r\n        }\r\n\r\n        case OPEN_POPOUT: {\r\n            window.history.pushState(null, null);\r\n\r\n            return {\r\n                ...state,\r\n                popouts: {\r\n                    ...state.popouts,\r\n                    [state.activeView]: action.payload.popout\r\n                }\r\n            };\r\n        }\r\n\r\n        case CLOSE_POPOUT: {\r\n            return {\r\n                ...state,\r\n                popouts: {\r\n                    ...state.popouts,\r\n                    [state.activeView]: null\r\n                }\r\n            };\r\n        }\r\n\r\n        case OPEN_MODAL: {\r\n            window.history.pushState(null, null);\r\n\r\n            let activeModal = action.payload.id || null;\r\n            let modalProps = action.payload.modalProps || {};\r\n            let modalsHistory = state.modalHistory[state.activeView] ? [...state.modalHistory[state.activeView]] : [];\r\n\r\n            if (activeModal === null) {\r\n                modalsHistory = [];\r\n            } else if (modalsHistory.indexOf(activeModal) !== -1) {\r\n                modalsHistory = modalsHistory.splice(0, modalsHistory.indexOf(activeModal) + 1);\r\n            } else {\r\n                modalsHistory.push(activeModal);\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                activeModals: {\r\n                    ...state.activeModals,\r\n                    [state.activeView]: activeModal\r\n                },\r\n                modalHistory: {\r\n                    ...state.modalHistory,\r\n                    [state.activeView]: modalsHistory\r\n                },\r\n                activeModalProps: modalProps\r\n            };\r\n        }\r\n\r\n        case CLOSE_MODAL: {\r\n            let activeModal = state.modalHistory[state.activeView][state.modalHistory[state.activeView].length - 2] || null;\r\n            let modalsHistory = state.modalHistory[state.activeView] ? [...state.modalHistory[state.activeView]] : [];\r\n\r\n            if (activeModal === null) {\r\n                modalsHistory = [];\r\n            } else if (modalsHistory.indexOf(activeModal) !== -1) {\r\n                modalsHistory = modalsHistory.splice(0, modalsHistory.indexOf(activeModal) + 1);\r\n            } else {\r\n                modalsHistory.push(activeModal);\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                activeModals: {\r\n                    ...state.activeModals,\r\n                    [state.activeView]: activeModal\r\n                },\r\n                modalHistory: {\r\n                    ...state.modalHistory,\r\n                    [state.activeView]: modalsHistory\r\n                }\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};","import {SET_ACCESS_TOKEN, SET_COLOR_SCHEME} from './actionTypes';\r\n\r\nconst initialState = {\r\n    accessToken: undefined,\r\n    colorScheme: 'client_light'\r\n};\r\n\r\nexport const vkuiReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case SET_COLOR_SCHEME: {\r\n            return {\r\n                ...state,\r\n                colorScheme: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_ACCESS_TOKEN: {\r\n            return {\r\n                ...state,\r\n                accessToken: action.payload,\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};","import {SET_FORM_DATA} from './actionTypes';\r\n\r\nconst initialState = {\r\n    forms: []\r\n};\r\n\r\nexport const formDataReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case SET_FORM_DATA: {\r\n            return {\r\n                ...state,\r\n                forms: {\r\n                    ...state.forms,\r\n                    [action.payload.form]: action.payload.data\r\n                }\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n\r\n    }\r\n\r\n};","import {\r\n\tCREATE_COUNTER, \r\n\tSET_COUNTERS, \r\n\tSET_ACTIVE_COUNTER, \r\n\tSET_LAST_ID, \r\n\tCHANGE_VALUE,\r\n\tSET_LOADED_COUNTERS\r\n} from './actionTypes';\r\n\r\nconst initialState = {\r\n\tactiveCounter: 0,\r\n\tcounters: [],\r\n\tlastId: 0,\r\n\tloadedCounters: false\r\n}\r\n\r\nexport const counterReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase CREATE_COUNTER:\r\n\t\t\t\r\n\t\t\tlet name = action.payload.name || \"Новый счетчик\";\r\n\t\t\twhile (true) {\r\n\t\t\t\tlet isUniq = true;\r\n\t\t\t\tstate.counters.forEach(counterObj => {\r\n\t\t\t\t\tconsole.log(name, counterObj.name);\r\n\t\t\t\t\tif (counterObj.name === name) {\r\n\t\t\t\t\t\tconsole.log('is queal')\r\n\t\t\t\t\t\tname = counterObj.name;\r\n\t\t\t\t\t\tlet matched = name.match(/\\(([0-9]+)\\)$/) || [];\r\n\t\t\t\t\t\tlet numberName = Number(matched[1]);\r\n\t\t\t\t\t\tconsole.log(numberName);\r\n\t\t\t\t\t\tif (numberName) {\r\n\t\t\t\t\t\t\tnumberName += 1;\r\n\t\t\t\t\t\t\tname = name.replace(/\\(([0-9]+)\\)$/, \"(\"+numberName+\")\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tname = name + \" (1)\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tisUniq = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (isUniq) break;\r\n\t\t\t}\r\n\r\n\t\t\tlet counters = [...state.counters, {\r\n\t\t\t\t...action.payload,\r\n\t\t\t\tname\r\n\t\t\t}];\r\n\r\n\t\t\tconsole.log('[Storage] create counter ', counters)\r\n\t\t\tlocalStorage.setItem('counters', JSON.stringify(counters || []));\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcounters\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase CHANGE_VALUE:\r\n\t\t\tcounters = [...state.counters];\r\n\t\t\tcounters[action.payload.id].value = action.payload.val;\r\n\t\t\t\r\n\t\t\tlocalStorage.setItem('counters', JSON.stringify(counters || []));\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcounters\r\n\t\t\t}\r\n\t\tcase SET_ACTIVE_COUNTER:\r\n\t\tcase SET_COUNTERS:\r\n\t\tcase SET_LOADED_COUNTERS:\r\n\r\n\t\t\tif (action.payload.counters)  {\r\n\t\t\t\tlocalStorage.setItem('counters', JSON.stringify(action.payload.counters || []));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import {combineReducers} from \"redux\";\r\nimport {routerReducer} from './router/reducers';\r\nimport {vkuiReducer} from './vk/reducers';\r\nimport {formDataReducer} from \"./formData/reducers\";\r\nimport {counterReducer} from \"./counter/reducers\";\r\n\r\nexport default combineReducers({\r\n    vkui: vkuiReducer,\r\n    router: routerReducer,\r\n    formData: formDataReducer,\r\n    counter: counterReducer\r\n});","export const SET_COLOR_SCHEME = 'SET_COLOR_SCHEME';\r\nexport const SET_ACCESS_TOKEN = 'SET_ACCESS_TOKEN';","export const SET_PAGE = 'SET_PAGE';\r\nexport const SET_STORY = 'SET_STORY';\r\nexport const GO_BACK = 'GO_BACK';\r\nexport const OPEN_POPOUT = 'OPEN_POPOUT';\r\nexport const CLOSE_POPOUT = 'CLOSE_POPOUT';\r\nexport const OPEN_MODAL = 'OPEN_MODAL';\r\nexport const CLOSE_MODAL = 'CLOSE_MODAL';","import VKConnectOld from \"@vkontakte/vkui-connect\";\r\nimport VKConnect from \"@vkontakte/vkui-connect-promise\";\r\n\r\nimport {store} from \"../../index\";\r\n\r\nimport {setColorScheme, setAccessToken} from \"../store/vk/actions\";\r\n\r\nconst APP_ID = 7075707;\r\nconst API_VERSION = '5.101';\r\n\r\nexport const initApp = () => (dispatch) => {\r\n    const VKConnectOldCallback = (e) => {\r\n        if (e.detail.type === 'VKWebAppUpdateConfig') {\r\n            VKConnectOld.unsubscribe(VKConnectOldCallback);\r\n\r\n            dispatch(setColorScheme(e.detail.data.scheme));\r\n        }\r\n    };\r\n\r\n    VKConnectOld.subscribe(VKConnectOldCallback);\r\n    VKConnect.send('VKWebAppInit', {});\r\n};\r\n\r\nexport const getAuthToken = (scope) => (dispatch) => {\r\n    VKConnect.send(\"VKWebAppGetAuthToken\", {\r\n        \"app_id\": APP_ID,\r\n        \"scope\": scope.join(',')\r\n    }).then(data => {\r\n        dispatch(setAccessToken(data.data.access_token));\r\n    }).catch(() => {\r\n        dispatch(setAccessToken(null));\r\n    });\r\n};\r\n\r\nexport const setDarkStatusBar = () => {\r\n    return VKConnect.send(\"VKWebAppSetViewSettings\", {\r\n        \"status_bar_style\": \"dark\",\r\n        \"action_bar_color\": \"#fff\"\r\n    })\r\n};\r\n\r\nexport const closeApp = () => {\r\n    return VKConnect.send(\"VKWebAppClose\", {\"status\": \"success\"});\r\n};\r\n\r\nexport const shareApp = () => {\r\n    return VKConnect.send(\"VKWebAppShare\", {\r\n        \"link\": \"https://vk.com/app\" + String(APP_ID)\r\n    });\r\n}\r\n\r\nexport const swipeBackOn = () => {\r\n    return VKConnect.send(\"VKWebAppEnableSwipeBack\", {});\r\n};\r\n\r\nexport const swipeBackOff = () => {\r\n    return VKConnect.send(\"VKWebAppDisableSwipeBack\", {});\r\n};\r\n\r\nexport const groupsGet = () => {\r\n    return APICall('groups.get', {\r\n        \"extended\": \"1\",\r\n        \"fields\": \"description\",\r\n        \"count\": \"100\"\r\n    });\r\n};\r\n\r\nexport const APICall = (method, params) => {\r\n    params['access_token'] = store.getState().vkui.accessToken;\r\n    params['v'] = params['v'] === undefined ? API_VERSION : params['v'];\r\n\r\n    return VKConnect.send(\"VKWebAppCallAPIMethod\", {\r\n        \"method\": method,\r\n        \"params\": params\r\n    }).then(data => {\r\n        return data.data.response;\r\n    }).catch(error => {\r\n        return error;\r\n    });\r\n};","export const smoothScrollToTop = () => {\r\n    const c = document.documentElement.scrollTop || document.body.scrollTop;\r\n\r\n    if (c > 30) {\r\n        return;\r\n    }\r\n\r\n    if (c > 0) {\r\n        window.requestAnimationFrame(smoothScrollToTop);\r\n        window.scrollTo(0, c - c / 8);\r\n    }\r\n};","export const SET_FORM_DATA = 'SAVE_FORM_DATA';","export const CREATE_COUNTER = 'CREATE_COUNTER';\r\nexport const SET_COUNTERS = 'SET_COUNTERS';\r\nexport const SET_ACTIVE_COUNTER = 'SET_ACTIVE_COUNTER';\r\nexport const SET_LAST_ID = 'SET_LAST_ID';\r\nexport const CHANGE_VALUE = 'CHANGE_VALUE';\r\nexport const SET_LOADED_COUNTERS = 'SET_LOADED_COUNTERS';","import {SET_PAGE, SET_STORY, GO_BACK, OPEN_POPOUT, CLOSE_POPOUT, OPEN_MODAL, CLOSE_MODAL} from './actionTypes';\r\n\r\nexport const setStory = (story, initial_panel) => (\r\n    {\r\n        type: SET_STORY,\r\n        payload: {\r\n            story: story,\r\n            initial_panel: initial_panel,\r\n        }\r\n    }\r\n);\r\n\r\nexport const setPage = (view, panel) => (\r\n    {\r\n        type: SET_PAGE,\r\n        payload: {\r\n            view: view,\r\n            panel: panel\r\n        }\r\n    }\r\n);\r\n\r\nexport const goBack = (from = 'iOS') => (\r\n    {\r\n        type: GO_BACK,\r\n        payload: {\r\n            from: from\r\n        }\r\n    }\r\n);\r\n\r\nexport const openPopout = (popout) => (\r\n    {\r\n        type: OPEN_POPOUT,\r\n        payload: {\r\n            popout: popout\r\n        }\r\n    }\r\n);\r\n\r\nexport const closePopout = () => (\r\n    {\r\n        type: CLOSE_POPOUT\r\n    }\r\n);\r\n\r\nexport const openModal = (id, props={}) => (\r\n    {\r\n        type: OPEN_MODAL,\r\n        payload: {\r\n            id,\r\n            modalProps:  props\r\n        }\r\n    }\r\n);\r\n\r\nexport const closeModal = () => (\r\n    {\r\n        type: CLOSE_MODAL\r\n    }\r\n);","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n            return;\r\n        }\r\n\r\n        window.addEventListener('load', () => {\r\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n            if (isLocalhost) {\r\n                // This is running on localhost. Lets check if a service worker still exists or not.\r\n                checkValidServiceWorker(swUrl);\r\n\r\n                // Add some additional logging to localhost, pointing developers to the\r\n                // service worker/PWA documentation.\r\n                navigator.serviceWorker.ready.then(() => {\r\n                    console.log(\r\n                        'This web app is being served cache-first by a service ' +\r\n                        'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n                    );\r\n                });\r\n            } else {\r\n                // Is not local host. Just register service worker\r\n                registerValidSW(swUrl);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then(registration => {\r\n            registration.onupdatefound = () => {\r\n                const installingWorker = registration.installing;\r\n                installingWorker.onstatechange = () => {\r\n                    if (installingWorker.state === 'installed') {\r\n                        if (navigator.serviceWorker.controller) {\r\n                            // At this point, the old content will have been purged and\r\n                            // the fresh content will have been added to the cache.\r\n                            // It's the perfect time to display a \"New content is\r\n                            // available; please refresh.\" message in your web app.\r\n                            console.log('New content is available; please refresh.');\r\n                        } else {\r\n                            // At this point, everything has been precached.\r\n                            // It's the perfect time to display a\r\n                            // \"Content is cached for offline use.\" message.\r\n                            console.log('Content is cached for offline use.');\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.error('Error during service worker registration:', error);\r\n        });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl)\r\n        .then(response => {\r\n            // Ensure service worker exists, and that we really are getting a JS file.\r\n            if (\r\n                response.status === 404 ||\r\n                response.headers.get('content-type').indexOf('javascript') === -1\r\n            ) {\r\n                // No service worker found. Probably a different app. Reload the page.\r\n                navigator.serviceWorker.ready.then(registration => {\r\n                    registration.unregister().then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                });\r\n            } else {\r\n                // Service worker found. Proceed as normal.\r\n                registerValidSW(swUrl);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            console.log(\r\n                'No internet connection found. App is running in offline mode.'\r\n            );\r\n        });\r\n}\r\n\r\nexport function unregister() {\r\n    if ('serviceWorker' in navigator) {\r\n        navigator.serviceWorker.ready.then(registration => {\r\n            registration.unregister();\r\n        });\r\n    }\r\n}","import {\r\n\tCREATE_COUNTER, \r\n\tSET_COUNTERS, \r\n\tSET_ACTIVE_COUNTER, \r\n\tSET_LAST_ID, \r\n\tCHANGE_VALUE,\r\n\tSET_LOADED_COUNTERS\r\n} from './actionTypes';\r\n\r\nexport const createCounter = (counterName=\"Новый счетчик\", counterValue=0, resetValue=0, id=0) => {\r\n\treturn {\r\n\t\ttype: CREATE_COUNTER,\r\n\t\tpayload: {\r\n\t\t\tname: counterName,\r\n\t\t\tvalue: counterValue,\r\n\t\t\tresetValue,\r\n\t\t\tid\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const setCounters = (newCounters=[]) => {\r\n\treturn {\r\n\t\ttype: SET_COUNTERS,\r\n\t\tpayload: {\r\n\t\t\tcounters: newCounters\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const setActiveCounter = (index=0) => (\r\n\t{\r\n\t\ttype: SET_ACTIVE_COUNTER,\r\n\t\tpayload: {\r\n\t\t\tactiveCounter: index\r\n\t\t}\t\r\n\t}\r\n)\r\n\r\nexport const setLastId = (id=0) => (\r\n\t{\r\n\t\ttype: SET_LAST_ID,\r\n\t\tpayload: {\r\n\t\t\tlastId: id\r\n\t\t}\r\n\t}\r\n)\r\n\r\nexport const changeValueCounter = (id=0, val=1) => (\r\n\t{\r\n\t\ttype: CHANGE_VALUE,\r\n\t\tpayload: {\r\n\t\t\tid,\r\n\t\t\tval\r\n\t\t}\r\n\t}\r\n)\r\n\r\nexport const setLoadedCounters = (loaded=false) => (\r\n\t{\r\n\t\ttype: SET_LOADED_COUNTERS,\r\n\t\tpayload: {\r\n\t\t\tloadedCounters: loaded\r\n\t\t}\t\r\n\t}\r\n)","import React, {PureComponent} from 'react';\r\n\r\nimport './OutlineMessage.css';\r\n\r\nexport default class OutlineMessage extends React.Component {\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<div className=\"outline-message\">\r\n\t\t\t\t{this.props.text}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from \"redux\";\r\n\r\nimport {\r\n\tcreateCounter,\r\n\tsetCounters,\r\n\tsetActiveCounter,\r\n\tsetLastId\r\n} from '../../store/counter/actions';\r\n\r\nimport {setStory, openModal, openPopout, closePopout} from '../../store/router/actions';\r\n\r\nimport OutlineMessage from '../../components/atoms/OutlineMessage'\r\n\r\nimport {\r\n\tPanel,\r\n\tPanelHeader,\r\n\tGroup,\r\n\tCell,\r\n\tCellButton,\r\n\tButton,\r\n\tDiv,\r\n\tHeaderButton,\r\n\tFixedLayout,\r\n\tAlert,\r\n\tList,\r\n\tIS_PLATFORM_IOS\r\n} from '@vkontakte/vkui';\r\n\r\nimport Icon24AddOutline from '@vkontakte/icons/dist/24/add_outline';\r\nimport Icon24Reorder from '@vkontakte/icons/dist/24/reorder';\r\nimport Icon24ReorderIos from '@vkontakte/icons/dist/24/reorder_ios';\r\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\r\nimport Icon24Delete from '@vkontakte/icons/dist/24/delete';\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\r\n\r\nclass CountersPanelMain extends React.Component {\r\n\tconstructor (props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tdraggable: false,\r\n\t\t\tremovable: false\r\n\t\t}\r\n\r\n\t\tthis.countTries = 0;\r\n\t}\r\n\r\n\tdeleteCounter (i=0) {\r\n\t\tconst counters = [...this.props.counters];\r\n    \tcounters.splice(i, 1);\r\n    \t\r\n    \tif (this.props.activeCounter === i) {\r\n    \t\tthis.props.setActiveCounter(0);\r\n    \t}\r\n    \t\r\n    \tif (counters.length === 0) {\r\n    \t\tthis.setState({\r\n\t\t\t\tdraggable: false,\r\n\t\t\t\tremovable: false\r\n\t\t\t})\r\n    \t}\r\n\r\n    \tthis.props.setCounters(counters);\r\n\t}\r\n\r\n\tconfirmDeleteCounter (i=0) {\r\n\t\tthis.props.openPopout(\r\n\t\t\t<Alert\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t{\r\n\t                    title: 'Нет',\r\n\t                    autoclose: true,\r\n\t                    style: IS_PLATFORM_IOS ? 'cancel' : ''\r\n\t                }, {\r\n\t                    title: 'Да',\r\n\t                    autoclose: true,\r\n\t                    style: !IS_PLATFORM_IOS ? 'destructive' : '',\r\n\t                    action: () => {\r\n\t                    \tthis.deleteCounter(i)\r\n\t                    }\r\n\t                }\r\n\t\t\t\t]}\r\n\t\t\t\tonClose={() => this.props.closePopout()}\r\n\t\t\t>\r\n\t\t\t\tВы уверены, что хотите удалить этот счетчик?\r\n\t\t\t</Alert>\r\n\t\t);\r\n\t}\r\n\r\n\tdeleteAllCounts = () => {\r\n\t\tconst countersLength = this.props.counters.length;\r\n\t\tlocalStorage.clear();\r\n\t\tthis.props.setActiveCounter(0);\r\n\t\tthis.props.setCounters([])\r\n\t\tthis.props.setLastId(-1);\r\n\t\tthis.alertMessage(\r\n\t\t\tcountersLength > 1 ?\r\n\t\t\t\"Все счетчики удалены!\" : \"Счетчик удален!\"\r\n\t\t)\r\n\t\tthis.setState({\r\n\t\t\tdraggable: false,\r\n\t\t\tremovable: false\r\n\t\t})\r\n\t}\r\n\r\n\talertMessage (message=\"\", actionText=\"Ок\") {\r\n\t\tthis.props.openPopout(\r\n\t\t\t<Alert\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t{\r\n\t                    title: actionText,\r\n\t                    autoclose: true\r\n\t                }\r\n\t            ]}\r\n\t\t\t\tonClose={() => this.props.closePopout()}\r\n\t\t\t>\r\n\t\t\t\t{message}\r\n\t\t\t</Alert>\r\n\t\t);\r\n\t}\r\n\r\n\tconfirmDeleteCounters () {\r\n\t\tthis.props.openPopout(\r\n\t\t\t<Alert\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t{\r\n\t                    title: IS_PLATFORM_IOS ? 'Отмена' : 'Нет',\r\n\t                    autoclose: true,\r\n\t                    style: IS_PLATFORM_IOS ? 'cancel' : '',\r\n\t                }, {\r\n\t                    title: 'Да',\r\n\t                    autoclose: true,\r\n\t                    action: this.deleteAllCounts,\r\n\t                    style: !IS_PLATFORM_IOS ? 'destructive' : '',\r\n\t                }\r\n\t\t\t\t]}\r\n\t\t\t\tonClose={() => this.props.closePopout()}\r\n\t\t\t>\r\n\t\t\t\tВы уверены, что хотите удалить {this.props.counters.length > 1 ? \"все счетчики\" : \"счетчик\"}?\r\n\t\t\t</Alert>\r\n\t\t);\r\n\t}\r\n\r\n\trender () {\r\n\t\t\r\n\t\tlet { setCounters, setActiveCounter, setStory, activeCounter, openModal } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Panel theme=\"white\" id={this.props.id}>\r\n\t\t\t\t<PanelHeader left={<HeaderButton><Icon24AddOutline onClick={() => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdraggable: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\topenModal(\"MODAL_PAGE_MANAGE_COUNTER\")\r\n\t\t\t\t}}/></HeaderButton>}>\r\n\t\t\t\t\tВаши счетчики\r\n\t\t\t\t</PanelHeader>\r\n\t\t\t\t{!this.props.counters.length ? \r\n\t\t\t\t\t  \t<OutlineMessage text=\"У Вас пока что нет счетчиков\"/> : null}\r\n\t\t\t\t{ this.props.counters.length ? \r\n\t\t\t\t<div className=\"margins-top\">\r\n\t\t\t\t\t<FixedLayout vertical=\"top\">\r\n\t\t\t\t\t\t<div style={{display: 'flex'}} className=\"controls\">\r\n\t\t\t\t\t\t\t{this.props.counters.length > 1 ?\r\n\t\t\t\t\t\t\t<div style={{flex:10}}>\r\n\t\t\t\t\t\t\t\t\t{!this.state.removable ? \r\n\t\t\t\t\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"default-button-tertiary button-full-width\" \r\n\t\t\t\t\t\t\t\t\t\t\tbefore={this.state.draggable ? <Icon24Done/> : <Icon24Reorder/>} \r\n\t\t\t\t\t\t\t\t\t\t\tlevel={this.state.draggable ? \"tertiary\" : \"tertiary\"} \r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {this.setState({draggable: !this.state.draggable})}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{this.state.draggable ? \"Завершить изменения\" : \"Изменить порядок\"}\r\n\t\t\t\t\t\t\t\t\t\t</Button> \r\n\t\t\t\t\t\t\t\t\t: <Button \r\n\t\t\t\t\t\t\t\t\t\tonClick={()=>{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.countTries += 1;\r\n\t\t\t\t\t\t\t\t\t\t\tif (this.countTries >= 10) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.countTries = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.alertMessage(\"С вами все хорошо?\", \"Да\")\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.confirmDeleteCounters();\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}} \r\n\t\t\t\t\t\t\t\t\t\tlevel=\"tertiary\" \r\n\t\t\t\t\t\t\t\t\t\tbefore={<Icon24Delete/>}>Все</Button>}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t: null}\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{ !this.state.draggable ? <Button \r\n\t\t\t\t\t\t\t\t\tclassName=\"destructive-button-tertiary button-full-width full-widthi-right\" \r\n\t\t\t\t\t\t\t\t\tlevel=\"tertiary\" \r\n\t\t\t\t\t\t\t\t\tbefore={this.props.counters.length <= 1 && !this.state.removable ? <Icon24Delete/> : null}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (this.props.counters.length <= 1 && !this.state.removable) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn this.confirmDeleteCounters();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({removable: !this.state.removable})\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{this.state.removable ? \"Завершить удаление\" : this.props.counters.length > 1 ? <Icon24Delete/> : \"Удалить счетчик\"}\r\n\t\t\t\t\t\t\t\t</Button> : null}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</FixedLayout>\r\n\t\t\t\t\t<div className=\"fixed-content\">\r\n\t\t\t\t\t\t<List>\r\n\t\t                  {this.props.counters.map((item, i) => (\r\n\t\t                    <Cell \r\n\t\t                      key={\"counter\" + i}\r\n\t\t                    \tonClick={() => {\r\n\t\t                    \t\tsetActiveCounter(i);\r\n\t\t                    \t\tsetStory('main', 'activeCounter')\r\n\t\t                    \t}} \r\n\t\t\t                    description={String(item.value)} \r\n\t\t\t                    after={item.value} \r\n\t\t\t                    removable={this.state.removable}\r\n\t\t\t                    onRemove={() => {\r\n\t\t\t                    \tif (IS_PLATFORM_IOS) {\r\n\t\t\t                    \t\tthis.deleteCounter(i);\r\n\t\t\t                    \t} else {\r\n\t\t\t                    \t\tthis.confirmDeleteCounter(i);\r\n\t\t\t                    \t}\r\n\t\t\t                    }}\r\n\t\t\t                    draggable={this.state.draggable} \r\n\t\t\t                    onDragFinish={({ from, to }) => {\r\n\t\t\t                      const draggingList = [...this.props.counters];\r\n\t\t\t                      let currentActive = draggingList[this.props.activeCounter];\r\n\t\t\t                      draggingList.splice(from, 1);\r\n\t\t\t                      draggingList.splice(to, 0, this.props.counters[from]);\r\n\t\t\t                      setActiveCounter(draggingList.indexOf(currentActive));\r\n\t\t\t                      setCounters(draggingList)\r\n\t\t\t                    }}\r\n\t\t\t                    className=\"counter-cell\"\r\n\t\t                    >{item.name}</Cell>\r\n\t\t                  ))}\r\n\t\t                </List>\r\n\t                </div>\r\n\t\t\t\t</div> : null }\r\n\t\t\t</Panel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        dispatch,\r\n        ...bindActionCreators({\r\n\t        createCounter, setCounters, setActiveCounter, setStory, openModal, setLastId, \r\n\t        openPopout, closePopout\r\n\t    }, dispatch)\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n    \tcounters: state.counter.counters,\r\n    \tactiveCounter: state.counter.activeCounter\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CountersPanelMain);","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from \"redux\";\r\n\r\nimport {createCounter, changeValueCounter, setActiveCounter} from '../../store/counter/actions'\r\nimport {openModal} from '../../store/router/actions'\r\n\r\nimport {\r\n\tPanel,\r\n\tPanelHeader,\r\n\tGroup,\r\n\tDiv,\r\n\tButton,\r\n\tHeaderButton,\r\n\tTouch,\r\n\tFixedLayout,\r\n\tInput\r\n} from '@vkontakte/vkui';\r\n\r\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\r\n\r\nimport Icon24Write from '@vkontakte/icons/dist/24/write';\r\nimport Icon24Copy from '@vkontakte/icons/dist/24/copy';\r\n\r\nimport NoSleep from 'nosleep.js';\r\n\r\nconst noSleep = new NoSleep();\r\n\r\nclass MainPanelActiveCounter extends React.PureComponent {\r\n\t\r\n\tconstructor (props) {\r\n\t\tsuper(props);\r\n\t\tthis.decrements = 0;\r\n\t\tthis.state = {\r\n\t\t\tactiveCounterVal: 0\r\n\t\t}\r\n\r\n\t\tthis.incTimeout = 0;\r\n\t\tthis.incInterval = 0;\r\n\t\tthis.decTimeout = 0;\r\n\t\tthis.decInterval = 0;\r\n\t}\r\n\r\n\tcomponentDidMount () {\r\n\t\tconsole.log('Component did mount (active counter)');\r\n\t\tif (Object.keys(this.props.activeCounterObj).length) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tactiveCounterVal: this.props.activeCounterObj.value || 0\r\n\t\t\t});\r\n\t\t} else if (this.props.loadedCounters) {\r\n\t\t\tthis.props.createCounter('Новый счетчик', 0);\r\n\t\t\tthis.props.setActiveCounter(0)\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate (prevProps) {\r\n\t\tif (this.props.activeCounterObj.value !== prevProps.activeCounterObj.value) {\r\n\t\t\tconsole.log('Update active counter value');\r\n\t\t\tthis.setState({\r\n\t\t\t\tactiveCounterVal: this.props.activeCounterObj.value || 0\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonCloseEditModal () {\r\n\t\tthis.setState({\r\n\t\t\tactiveCounterVal: this.props.store.getState().counter.counters[this.props.activeCounter].value\r\n\t\t})\r\n\t}\r\n\r\n\tupdateCounterValue (val=0) {\r\n\t\tif (val >= 0) {\r\n\t\t\tthis.setState({\r\n\t\t\t\t\tactiveCounterVal: val\r\n\t\t\t\t})\r\n\t\t\tthis.props.changeValueCounter(this.props.activeCounter, val)\r\n\t\t}\r\n\t}\r\n\r\n\tincrementCounter = (value=1) => {\r\n\t\t\r\n\t\tnoSleep.enable();\r\n\r\n\t\tlet counterValue = new Number(this.state.activeCounterVal) || 0;\r\n\t\tlet counter = this.props.activeCounterObj;\r\n\r\n\t\tcounterValue += new Number(value);\r\n\r\n\t\tlet iWillUpdateMyself = false;\r\n\r\n\t\tif (counterValue > 999999999999) counterValue = 999999999999;\r\n\t\tif (counter.resetValue <= counterValue && counter.resetValue) {\r\n\t\t\tiWillUpdateMyself = true\r\n\t\t\tcounterValue = 0;\r\n\t\t\tthis.decrements = false;\r\n\t\t\tthis.updateCounterValue(counterValue);\r\n\t\t}\r\n\r\n\t\tif (!this.decrements || iWillUpdateMyself) {\r\n\t\t\treturn this.updateCounterValue(counterValue);\r\n\t\t}\r\n\t}\r\n\r\n\tincPositive = (e) => {\r\n\t\treturn this.incrementCounter(1);\r\n\t}\r\n\r\n\tincNegative = (e) => {\r\n\t\treturn this.incrementCounter(-1);\r\n\t}\t\r\n\r\n\topenEditModal = () => {\r\n\t\tthis.props.openModal(\"MODAL_PAGE_MANAGE_COUNTER\", {\r\n\t\t\t...this.props.activeCounterObj,\r\n\t\t\tonClose: () => {\r\n\t\t\t\tthis.onCloseEditModal()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tincStart = (e) => {\r\n\t\te.originalEvent.preventDefault()\r\n\t\tif (!this.incTimeout) {\r\n\t\t\tthis.incTimeout = setTimeout(() => {\r\n\t\t\t\tthis.incInterval = setInterval(() => {\r\n\t\t\t\t\tthis.incPositive()\r\n\t\t\t\t}, 50)\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t}\r\n\r\n\tdecStart = (e) => {\r\n\t\te.originalEvent.preventDefault()\r\n\t\tif (!this.decTimeout) {\r\n\t\t\tthis.decTimeout = setTimeout(() => {\r\n\t\t\t\tthis.decInterval = setInterval(() => {\r\n\t\t\t\t\tthis.incNegative()\r\n\t\t\t\t}, 50)\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t}\r\n\r\n\tonStopTouch = () => {\r\n\t\tclearTimeout(this.incTimeout)\r\n\t\tclearTimeout(this.decTimeout)\r\n\t\tclearInterval(this.incInterval)\r\n\t\tclearInterval(this.decInterval)\r\n\r\n\t\tif (this.incTimeout) {\r\n\t\t\tthis.incTimeout = 0;\r\n\t\t\tthis.incPositive();\r\n\t\t} else if (this.decTimeout) {\r\n\t\t\tthis.decTimeout = 0;\r\n\t\t\tthis.incNegative();\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\tcopyCounterValue = () => {\r\n\t\t// this.state.activeCounterVal\r\n\t}\r\n\r\n\trender () {\r\n\t\tlet counterVal = this.state.activeCounterVal;\r\n\t\t\r\n\t\tconsole.log('[Render] Rednering active counter...')\r\n\t\r\n\t\t\r\n\t\tconst counterValueLength = String(counterVal).length;\r\n\r\n\t\tconst bigValueClasses = classNames(\"big-value\", {\r\n\t\t\t\"big-value-small\": counterValueLength === 4,\r\n\t\t\t\"middle-size\": counterValueLength > 4 && counterValueLength < 6,\r\n\t\t\t\"middle-small-size\": counterValueLength >= 6 && counterValueLength < 8,\r\n\t\t\t\"small-size\": counterValueLength >= 8\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t<Panel theme=\"white\" id={this.props.id} className=\"active-counter--wrap\">\r\n\t\t\t\t<PanelHeader \r\n\t\t\t\t\tleft={<HeaderButton onClick={this.openEditModal}><Icon24Write/></HeaderButton>}\r\n\t\t\t\t>{this.props.activeCounterObj.name}</PanelHeader>\r\n\t\t\t\t<FixedLayout className=\"paddings\">\r\n\t\t\t\t\t<CopyToClipboard \r\n\t\t\t\t\t\ttext={this.state.activeCounterVal}>\r\n\t\t\t\t\t\t<Button before={<Icon24Copy/>}className=\"icon-button\">Скопировать</Button>\r\n\t\t\t\t\t</CopyToClipboard>\r\n\t\t\t\t</FixedLayout>\r\n\t\t\t\t<div className=\"active-counter\">\r\n\t\t\t\t\t<Div className=\"justify-center active-counter--value\">\r\n\t\t\t\t\t\t<span className={bigValueClasses} onTouchEnd={this.incPositive}>{counterVal}</span>\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t\t<Div className=\"active-counter-controllers\">\r\n\t\t\t\t\t\t<Touch className=\"Touch\" onMove={this.touchMove} onStart={this.incStart} onEnd={this.onStopTouch} useCapture={true}><Button stopPropogation={false} size=\"xl\" level=\"secondary\">+</Button></Touch>\r\n\t\t\t\t\t\t<Touch className=\"Touch\" onMove={this.touchMove} onStart={this.decStart} onEnd={this.onStopTouch} useCapture={true}><Button stretched stopPropogation={false} size=\"xl\" level=\"secondary\" className=\"minus\">-</Button></Touch>\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t</div>\r\n\t\t\t</Panel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        dispatch,\r\n        ...bindActionCreators({createCounter, changeValueCounter, openModal, setActiveCounter}, dispatch)\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n    \tactiveCounterObj: state.counter.counters[state.counter.activeCounter] || {},\r\n    \tactiveCounter: state.counter.activeCounter,\r\n    \tname: (state.counter.counters[state.counter.activeCounter] || {}).name || \"\",\r\n    \tloadedCounters: state.counter.loadedCounters\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainPanelActiveCounter);","import React from 'react';\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from \"redux\";\r\n\r\nimport {\r\n\tsetCounters,\r\n\tsetActiveCounter\r\n} from '../../../store/counter/actions';\r\n\r\nimport {setStory, openModal, openPopout, closePopout} from '../../../store/router/actions';\r\nimport {shareApp} from '../../../services/VK';\r\n\r\nimport OutlineMessage from '../../../components/atoms/OutlineMessage'\r\n\r\nimport {\r\n\tPanel,\r\n\tPanelHeader,\r\n\tGroup,\r\n\tCell,\r\n\tList,\r\n\tCellButton,\r\n\tDiv,\r\n\tHeaderButton,\r\n\tFixedLayout,\r\n\tAlert,\r\n\tIS_PLATFORM_IOS\r\n} from '@vkontakte/vkui';\r\n\r\nimport Icon24AddOutline from '@vkontakte/icons/dist/24/add_outline';\r\nimport Icon24Delete from '@vkontakte/icons/dist/24/delete';\r\nimport Icon24ShareExternal from '@vkontakte/icons/dist/24/share_external';\r\n\r\n\r\n\r\nimport './SettingsPanelMain.css';\r\n\r\nclass SettingsPanelMain extends React.Component {\r\n\tconstructor (props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tdraggable: false\r\n\t\t}\r\n\t\t\r\n\t\tthis.countTries = 0;\r\n\t}\r\n\r\n\tdeleteAllCounts = () => {\r\n\t\tlocalStorage.clear();\r\n\t\tthis.props.setActiveCounter(0);\r\n\t\tthis.props.setCounters([])\r\n\t\tthis.alertMessage(\"Все счетчики удалены!\")\r\n\t}\r\n\r\n\talertMessage (message=\"\", actionText=\"Ок\") {\r\n\t\tthis.props.openPopout(\r\n\t\t\t<Alert\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t{\r\n\t                    title: actionText,\r\n\t                    autoclose: true\r\n\t                }\r\n\t            ]}\r\n\t\t\t\tonClose={() => this.props.closePopout()}\r\n\t\t\t>\r\n\t\t\t\t{message}\r\n\t\t\t</Alert>\r\n\t\t);\r\n\t}\r\n\r\n\tconfirmDeleteCounters () {\r\n\t\tthis.props.openPopout(\r\n\t\t\t<Alert\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t{\r\n\t                    title: IS_PLATFORM_IOS ? 'Отмена' : 'Нет',\r\n\t                    autoclose: true,\r\n\t                    style: IS_PLATFORM_IOS ? 'cancel' : 'destructive',\r\n\t                }, {\r\n\t                    title: 'Да',\r\n\t                    autoclose: true,\r\n\t                    action: this.deleteAllCounts\r\n\t                }\r\n\t\t\t\t]}\r\n\t\t\t\tonClose={() => this.props.closePopout()}\r\n\t\t\t>\r\n\t\t\t\tВы уверены, что хотите удалить все счетчики?\r\n\t\t\t</Alert>\r\n\t\t);\r\n\t}\r\n\r\n\trender () {\r\n\t\t\r\n\t\tlet { setCounters, setStory, openModal, setActiveCounter, counters } = this.props;\r\n\t\treturn (\r\n\t\t\t<Panel id={this.props.id}>\r\n\t\t\t\t<PanelHeader>\r\n\t\t\t\t\tУправление\r\n\t\t\t\t</PanelHeader>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<CellButton before={<Icon24ShareExternal/>} onClick={()=>shareApp()}>Рассказать о сервисе</CellButton>\r\n\t\t\t\t\t<CellButton level=\"danger\" indicator={counters.length} before={<Icon24Delete/>} onClick={()=>{\r\n\t\t\t\t\t\tthis.countTries += 1;\r\n\t\t\t\t\t\tconsole.log(this.countTries);\r\n\t\t\t\t\t\tif (this.countTries >= 10) {\r\n\t\t\t\t\t\t\tthis.countTries = 0;\r\n\t\t\t\t\t\t\tthis.alertMessage(\"С вами все хорошо?\", \"Да\")\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.confirmDeleteCounters();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}>Удалить все счетчики</CellButton>\r\n\t\t\t\t</div>\r\n\t\t\t\t<OutlineMessage text={<span className=\"description\">Версия {this.props.version}</span>}/>\r\n\t\t\t</Panel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        dispatch,\r\n        ...bindActionCreators({setCounters, openModal, setActiveCounter, openPopout, closePopout}, dispatch)\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n    \tcounters: state.counter.counters,\r\n    \tactiveCounter: state.counter.activeCounter\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsPanelMain);","import React from 'react';\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from \"redux\";\r\n\r\nimport {\r\n    ModalPage,\r\n    ModalPageHeader,\r\n    HeaderButton,\r\n    FormLayout,\r\n    Input,\r\n    Button,\r\n    IS_PLATFORM_IOS\r\n} from '@vkontakte/vkui';\r\n\r\n\r\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\r\n\r\nimport {createCounter, setCounters, setLastId} from '../../../store/counter/actions'\r\n\r\nimport './ManageCounter.css';\r\n\r\nclass ManageCounterModal extends React.Component {\r\n\tconstructor (props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tinputData: {\r\n\t\t\t\tvalue: this.props.modalProps.value || 0,\r\n\t\t\t\tresetValue: this.props.modalProps.resetValue || 0,\r\n\t\t\t\ttitle: this.props.modalProps.name\r\n\t\t\t},\r\n\t\t\tediting: this.props.modalProps.resetValue !== undefined,\r\n            titleInputStatus: 'default'\r\n\t\t}\r\n\t}\r\n\r\n\thandleInput = (e) => {\r\n        let value = e.currentTarget.value;\r\n\r\n        if (e.currentTarget.type === 'checkbox') {\r\n            value = e.currentTarget.checked;\r\n        }\r\n        \r\n        value = this.filterInputValue(e.currentTarget.name, value);\r\n        this.setState({\r\n            inputData: {\r\n                ...this.state.inputData,\r\n                [e.currentTarget.name]: value\r\n            }\r\n        })\r\n    };\r\n\r\n    filterInputValue (name='', value) {\r\n    \tswitch (name) {\r\n    \t\tcase 'value':\r\n    \t\tcase 'resetValue':\r\n    \t\t\tvalue = Number(value);\r\n    \t\t\tif (value < 0) value = 0;\r\n    \t\t\tif (value > 999999999999) value = 999999999999;\r\n    \t\t\treturn value\r\n    \t\tdefault:\r\n    \t\t\treturn value\r\n    \t}\r\n    }\r\n\r\n    createCounter = () => {\r\n    \tlet counters = [...this.props.counters];\r\n\r\n        // let alreadyHaveCounter = counters.find((counter) => counter.name === this.state.inputData.title);\r\n       \r\n        // if (alreadyHaveCounter) {\r\n            \r\n        //     this.setState({\r\n        //         titleInputStatus: \"error\"\r\n        //     });\r\n\r\n        //     return;\r\n        // }\r\n\r\n        // console.log(this.state.inputData.value)\r\n\r\n    \tthis.props.createCounter(\r\n    \t\tthis.state.inputData.title,\r\n    \t\tthis.state.inputData.value,\r\n    \t\tthis.state.inputData.resetValue,\r\n    \t\tthis.props.lastId+1    \t\t\r\n    \t);\r\n    \t\r\n    \tif (!this.state.inputData.title) {\r\n    \t\tthis.props.setLastId(this.props.lastId+1);\r\n    \t}\r\n\r\n        if (this.props.modalProps.onClose) {\r\n            this.props.modalProps.onClose();\r\n        }\r\n\r\n    \tthis.props.onClose();\r\n    }\r\n\r\n    saveCounter = () => {\r\n    \tlet counters = [...this.props.counters];\r\n    \t\r\n    \tlet counter = counters[this.props.activeCounter];\r\n    \t\r\n    \tlet firstName = counter.name;\r\n\r\n        let name = this.state.inputData.title || \"Новый счетчик\";\r\n        \r\n        while (true) {\r\n            let isUniq = true;\r\n            counters.forEach((counterObj, i) => {\r\n                console.log(name, counterObj.name);\r\n                if (counterObj.name === name && i !== this.props.activeCounter) {\r\n                    console.log('is queal')\r\n                    name = counterObj.name;\r\n                    let matched = name.match(/\\(([0-9]+)\\)$/) || [];\r\n                    let numberName = Number(matched[1]);\r\n                    console.log(numberName);\r\n                    if (numberName) {\r\n                        numberName += 1;\r\n                        name = name.replace(/\\(([0-9]+)\\)$/, \"(\"+numberName+\")\");\r\n                    } else {\r\n                        name = name + \" (1)\";\r\n                    }\r\n                    isUniq = false;\r\n                }\r\n            });\r\n            if (isUniq) break;\r\n        }\r\n\r\n    \tcounter.name = name;\r\n    \t\r\n        let alreadyHaveCounter = counters.find(\r\n            (counter_, i) => \r\n                counter.name === counter_.name && \r\n                i !== this.props.activeCounter\r\n        );\r\n\r\n        if (alreadyHaveCounter) {\r\n            \r\n            this.setState({\r\n                titleInputStatus: \"error\",\r\n                inputData: {\r\n                    ...this.state.inputData,\r\n                    title: firstName\r\n                }\r\n            });\r\n\r\n            return;\r\n        }\r\n\r\n        counter.value = this.state.inputData.value || 0;\r\n    \tcounter.resetValue = this.state.inputData.resetValue || 0;\r\n\r\n    \tconsole.log(counters);\r\n    \tthis.props.setCounters(counters);\r\n        \r\n        if (this.props.modalProps.onClose) {\r\n            this.props.modalProps.onClose();\r\n        }\r\n\r\n    \tthis.props.onClose();\r\n    }\r\n    \r\n    inputNumberOnly (e) {\r\n    \te.target.value = Number(e.target.value.replace(/[^0-9]/g, \"\")) || \"\";\r\n    }\r\n\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<ModalPage\r\n\t\t\t\tid={this.props.id}\r\n\t\t\t\theader={\r\n\t\t\t\t\t<ModalPageHeader\r\n\t\t\t\t\t\tleft={!IS_PLATFORM_IOS && <HeaderButton onClick={this.props.onClose}><Icon24Cancel /></HeaderButton>}\r\n\t              right={<HeaderButton onClick={() => {\r\n\t\t\t\t\t\t\tthis.state.editing ? this.saveCounter() : this.createCounter()\r\n\t\t\t\t\t\t}}>{IS_PLATFORM_IOS ? 'Готово' : <Icon24Done />}</HeaderButton>}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{this.state.editing ? this.props.modalProps.name : \"Новый счетчик\"}\r\n\t\t\t\t\t</ModalPageHeader>\r\n\t\t\t\t}\r\n\t\t\t\tsettlingHeight={80}\r\n\t\t\t\tonClose={this.props.onClose}\r\n\t\t\t>\r\n\t\t\t\t<FormLayout>\r\n\t\t\t\t\t<Input bottom={this.state.titleInputStatus === \"error\" ? \"Такой счетчик уже существует\" : \"\"} status={this.state.titleInputStatus} autoComplete=\"off\" name=\"title\" onChange={this.handleInput} top=\"Название счетчика\" defaultValue={this.props.modalProps.name || \"\"} placeholder=\"\"/>\r\n\t\t\t\t\t<Input autoComplete=\"off\" maxLength=\"12\" name=\"value\" onChange={this.handleInput} top=\"Значение счетчика\" defaultValue={this.props.modalProps.value || \"\"} placeholder=\"0\" type=\"tel\" pattern=\"[0-9]*\" onInput={this.inputNumberOnly}/>\r\n\t\t\t\t\t<Input autoComplete=\"off\" maxLength=\"12\" name=\"resetValue\" onChange={this.handleInput} top=\"Сбросить, когда достигнет\" defaultValue={this.props.modalProps.resetValue || \"\"} placeholder=\"0\" type=\"tel\" pattern=\"[0-9]*\" onInput={this.inputNumberOnly}/>\r\n\t\t\t\t\t<Button size=\"xl\" level=\"primary\" onClick={() => {\r\n\t\t\t\t\t\tthis.state.editing ? this.saveCounter() : this.createCounter()\r\n\t\t\t\t\t}}>{this.state.editing ? \"Сохранить\" : \"Добавить\"}</Button>\r\n\t\t\t\t</FormLayout>\r\n\t\t\t</ModalPage>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        dispatch,\r\n        ...bindActionCreators({createCounter, setCounters, setLastId}, dispatch)\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n    \tcounters: state.counter.counters,\r\n    \tactiveCounter: state.counter.activeCounter,\r\n    \tlastId: state.counter.lastId\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageCounterModal);","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux'\r\nimport {goBack, closeModal, setStory} from \"./js/store/router/actions\";\r\nimport {setCounters, setActiveCounter, setLastId, setLoadedCounters} from \"./js/store/counter/actions\";\r\n\r\nimport * as VK from './js/services/VK';\r\n\r\nimport {\r\n    Epic,\r\n    View,\r\n    Root,\r\n    Tabbar,\r\n    ModalRoot,\r\n    TabbarItem,\r\n    ConfigProvider\r\n} from '@vkontakte/vkui';\r\n\r\nimport CountersPanelMain from './js/panels/counters/main';\r\nimport MainPanelActiveCounter from './js/panels/main/activeCounter';\r\nimport SettingsPanelMain from './js/panels/settings/main';\r\n\r\nimport ManageCounterModal from './js/components/modals/ManageCounter';\r\n\r\nimport Icon24List from '@vkontakte/icons/dist/24/list';\r\nimport Icon24PlaySpeed from '@vkontakte/icons/dist/24/play_speed';\r\nimport Icon24MoreVertical from '@vkontakte/icons/dist/24/more_vertical';\r\n\r\nimport Icon28Newsfeed from '@vkontakte/icons/dist/28/newsfeed';\r\nimport Icon28More from '@vkontakte/icons/dist/28/more';\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.lastAndroidBackAction = 0;\r\n        this.version = \"1.0.0\";\r\n        this.lastUpdate = 0;\r\n    }\r\n\r\n    componentWillMount() {\r\n        const {goBack, dispatch} = this.props;\r\n\r\n        dispatch(VK.initApp());\r\n\r\n        window.onpopstate = () => {\r\n            let timeNow = +new Date();\r\n\r\n            if (timeNow - this.lastAndroidBackAction > 500) {\r\n                this.lastAndroidBackAction = timeNow;\r\n\r\n                goBack('Android');\r\n            } else {\r\n                window.history.pushState(null, null);\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {activeView, activeStory, activePanel, scrollPosition, activeCounter, counters, lastIdCounter} = this.props;\r\n        \r\n        console.log('Component did update')\r\n\r\n        if (\r\n            prevProps.activeView !== activeView ||\r\n            prevProps.activePanel !== activePanel ||\r\n            prevProps.activeStory !== activeStory\r\n        ) {\r\n            let pageScrollPosition = scrollPosition[activeStory + \"_\" + activeView + \"_\" + activePanel] || 0;\r\n\r\n            window.scroll(0, pageScrollPosition);\r\n        }\r\n\r\n        async function updateAll () {\r\n            console.log('Update...');\r\n            if (counters && counters !== prevProps.counters) {\r\n                localStorage.setItem('counters', JSON.stringify(counters || []))\r\n            }\r\n\r\n            if (activeCounter !== undefined && activeCounter !== prevProps.activeCounter) {\r\n                localStorage.setItem('activeCounter', activeCounter || 0)\r\n            }\r\n\r\n            if (lastIdCounter !== undefined && lastIdCounter !== prevProps.lastIdCounter) {\r\n                localStorage.setItem('lastIdCounter', lastIdCounter || 0)\r\n            }\r\n        }\r\n        \r\n        updateAll();\r\n    }\r\n\r\n    copyActiveCounterValue = () => {\r\n        let activeCounterObj = this.props.counters[this.props.activeCounter];\r\n        \r\n        if (activeCounterObj) {\r\n\r\n        }\r\n     }\r\n\r\n    componentDidMount () {\r\n        console.log('Mount main component!');\r\n        let {setCounters, setActiveCounter, setLoadedCounters} = this.props;\r\n        \r\n        let counters, activeCounter;\r\n        try {\r\n            counters = JSON.parse(localStorage.getItem('counters'))\r\n        } catch (e) {console.error(e)}\r\n        \r\n        try {\r\n            activeCounter = Number(localStorage.getItem('activeCounter'))\r\n        } catch (e) {console.error(e)}\r\n\r\n        let lastIdCounter = Number(localStorage.getItem('lastIdCounter'));\r\n        \r\n        console.log('[App] localStorage', localStorage.getItem(\"counters\"));\r\n        console.log('[App] got item counters from local storage first', counters);\r\n\r\n\r\n        if (!counters || counters.length === 0) {\r\n            counters = [{\r\n                name: \"Новый счетчик\",\r\n                id: 0,\r\n                value: 0,\r\n                resetValue: 0\r\n            }];\r\n        }\r\n\r\n        console.log('[App] got item counters from local storage ', counters);\r\n\r\n        setCounters(counters || []);\r\n        setActiveCounter(activeCounter || 0);\r\n        setLastId(lastIdCounter || 0);\r\n        setLoadedCounters(true);\r\n    }\r\n\r\n    render() {\r\n        const {goBack, setStory, closeModal, popouts, activeView, activeStory, activePanel, colorScheme, activeModals, panelsHistory, modalProps} = this.props;\r\n\r\n        let history = (panelsHistory[activeView] === undefined) ? [activeView] : panelsHistory[activeView];\r\n        let popout = (popouts[activeView] === undefined) ? null : popouts[activeView];\r\n        let activeModal = (activeModals[activeView] === undefined) ? null : activeModals[activeView];\r\n\r\n        const homeModals = (\r\n            <ModalRoot activeModal={activeModal}>\r\n                <ManageCounterModal \r\n                    id=\"MODAL_PAGE_MANAGE_COUNTER\"\r\n                    onClose={() => closeModal()}\r\n                    modalProps={modalProps}\r\n                />\r\n            </ModalRoot>\r\n        );\r\n        \r\n        return (\r\n            <ConfigProvider isWebView={true} scheme={colorScheme}>\r\n                <Epic activeStory={activeStory} tabbar={\r\n                    <Tabbar>\r\n                        <TabbarItem\r\n                            onClick={() => setStory('main', 'activeStory')}\r\n                            selected={activeStory === 'main'}\r\n                        ><Icon24PlaySpeed/></TabbarItem>\r\n                        <TabbarItem\r\n                            onClick={() => setStory('counters', 'counters')}\r\n                            selected={activeStory === 'counters'}\r\n                        ><Icon24List/></TabbarItem>\r\n                    </Tabbar>\r\n                }>\r\n                    <Root id=\"main\" activeView={activeView} popout={popout}>\r\n                        <View \r\n                            id=\"main\"\r\n                            modal={homeModals}\r\n                            activePanel={activePanel}\r\n                            history={history}\r\n                            onSwipeBack={() => goBack()}\r\n                        >\r\n                            <MainPanelActiveCounter id=\"activeCounter\" store={this.props.store}/>\r\n                        </View>\r\n                    </Root>\r\n                    <Root id=\"counters\" activeView={activeView} popout={popout}>\r\n                        <View \r\n                            id=\"counters\" \r\n                            modal={homeModals}\r\n                            activePanel={activePanel}\r\n                            history={history}\r\n                            onSwipeBack={() => goBack()}>\r\n                            <CountersPanelMain id=\"counters\"/>\r\n                        </View>\r\n                    </Root>\r\n                    <Root id=\"settings\" activeView={activeView} popout={popout}>\r\n                        <View \r\n                            id=\"settings\" \r\n                            modal={homeModals}\r\n                            activePanel={activePanel}\r\n                            history={history}\r\n                            onSwipeBack={() => goBack()}>\r\n                            <SettingsPanelMain id=\"settings\" version={this.version}/>\r\n                        </View>\r\n                    </Root>\r\n                </Epic>\r\n            </ConfigProvider>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        activeView: state.router.activeView,\r\n        activePanel: state.router.activePanel,\r\n        activeStory: state.router.activeStory,\r\n        modalProps: state.router.activeModalProps,\r\n        panelsHistory: state.router.panelsHistory,\r\n        activeModals: state.router.activeModals,\r\n        popouts: state.router.popouts,\r\n        scrollPosition: state.router.scrollPosition,\r\n        activeCounter: state.counter.activeCounter,\r\n        lastIdCounter: state.counter.lastId,\r\n        colorScheme: state.vkui.colorScheme,\r\n        counters: state.counter.counters\r\n    };\r\n};\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        dispatch,\r\n        ...bindActionCreators({setStory, goBack, closeModal, setCounters, setActiveCounter, setLastId, setLoadedCounters}, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import {SET_COLOR_SCHEME, SET_ACCESS_TOKEN} from './actionTypes';\r\n\r\nexport const setColorScheme = (scheme) => (\r\n    {\r\n        type: SET_COLOR_SCHEME,\r\n        payload: scheme\r\n    }\r\n);\r\n\r\nexport const setAccessToken = (accessToken) => (\r\n    {\r\n        type: SET_ACCESS_TOKEN,\r\n        payload: accessToken\r\n    }\r\n);","import 'core-js/es6/map';\r\nimport 'core-js/es6/set';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport {applyMiddleware, createStore} from \"redux\";\r\nimport thunk from 'redux-thunk';\r\nimport {Provider} from 'react-redux';\r\nimport rootReducer from './js/store/reducers';\r\nimport {composeWithDevTools} from 'redux-devtools-extension';\r\nimport mVKMiniAppsScrollHelper from '@vkontakte/mvk-mini-apps-scroll-helper';\r\n\r\nimport {setStory} from \"./js/store/router/actions\";\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './css/main.css';\r\n\r\nimport registerServiceWorker from './registerServiceWorker';\r\n\r\nimport App from './App';\r\n\r\nexport const store = createStore(rootReducer, composeWithDevTools(\r\n    applyMiddleware(thunk),\r\n));\r\n\r\nwindow.onerror = function (errorMsg, url, lineNumber, columnNumber, error) {\r\n    let textAoutput = 'Произошла ошибка, пожалуйста, пришлите скриншот мне <a href=\"https://vk.com/kinock\" target=\"_blank\">vk.com/kinock</a> или создайте отчет в баг-трекере <br/><code>'+ errorMsg \r\n    + '\\n' +  url + ':' + lineNumber + ':' + columnNumber + '\\n' + (error || {}).stack + '</code><br/>' + window.navigator.userAgent;\r\n\r\n    document.body.innerHTML = textAoutput;\r\n    console.error(error);\r\n    console.info(textAoutput);\r\n    return false;\r\n}\r\n\r\n\r\n\r\n\r\nstore.dispatch(setStory('main', 'activeCounter'));\r\nconst root = document.getElementById('root');\r\nmVKMiniAppsScrollHelper(root);\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App store={store}/>\r\n    </Provider>,\r\n    root\r\n);\r\n\r\nregisterServiceWorker();"],"sourceRoot":""}